import{a as fe,g as be,r as z,u as ye,G as we,_ as je,b as v,j as e,s as X,c as ve,e as Ce,B as s,o as c,R as Se,v as ze,S as M}from"./index-BeuNjhzr.js";import{O as ke,a as _,Q as te,c as Q,A as re,t as a,d as h,k as _e,q as ie,R as We,I as Re,P as J,j as Ee,N as $e,m as Me,n as Ie}from"./Navbar-MuDbTouq.js";import{g as K,a as se}from"./teamMappings-BQ8e-HGV.js";import{c as Te,u as De,T as i}from"./Button-D9sHacpw.js";import{C as F,T as Pe,a as Ae}from"./TrendingUp-t2dIhgZE.js";import{W as He}from"./WeeklyCalendar-DYsDj40k.js";import{g as Le}from"./season-CT1Q602E.js";import{A as Fe}from"./Alert-su9Uuwqx.js";import{f as ne,p as Ne}from"./parseISO-D6CdGl5U.js";function Ue(t){return fe("MuiCollapse",t)}be("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Be=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Ge=t=>{const{orientation:r,classes:n}=t,l={root:["root",`${r}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${r}`],wrapperInner:["wrapperInner",`${r}`]};return Ce(l,Ue,n)},Oe=X("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:n}=t;return[r.root,r[n.orientation],n.state==="entered"&&r.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&r.hidden]}})(({theme:t,ownerState:r})=>v({height:0,overflow:"hidden",transition:t.transitions.create("height")},r.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},r.state==="entered"&&v({height:"auto",overflow:"visible"},r.orientation==="horizontal"&&{width:"auto"}),r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&{visibility:"hidden"})),Ke=X("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,r)=>r.wrapper})(({ownerState:t})=>v({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Qe=X("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,r)=>r.wrapperInner})(({ownerState:t})=>v({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Y=z.forwardRef(function(r,n){const l=ye({props:r,name:"MuiCollapse"}),{addEndListener:d,children:x,className:m,collapsedSize:f="0px",component:b,easing:g,in:u,onEnter:I,onEntered:C,onEntering:N,onExit:p,onExited:S,onExiting:w,orientation:T="vertical",style:W,timeout:R=we.standard,TransitionComponent:oe=ke}=l,ae=je(l,Be),U=v({},l,{orientation:T,collapsedSize:f}),D=Ge(U),Z=_(),le=Te(),E=z.useRef(null),V=z.useRef(),B=typeof f=="number"?`${f}px`:f,P=T==="horizontal",A=P?"width":"height",G=z.useRef(null),de=De(n,G),$=o=>j=>{if(o){const k=G.current;j===void 0?o(k):o(k,j)}},q=()=>E.current?E.current[P?"clientWidth":"clientHeight"]:0,ce=$((o,j)=>{E.current&&P&&(E.current.style.position="absolute"),o.style[A]=B,I&&I(o,j)}),xe=$((o,j)=>{const k=q();E.current&&P&&(E.current.style.position="");const{duration:H,easing:O}=te({style:W,timeout:R,easing:g},{mode:"enter"});if(R==="auto"){const ee=Z.transitions.getAutoHeightDuration(k);o.style.transitionDuration=`${ee}ms`,V.current=ee}else o.style.transitionDuration=typeof H=="string"?H:`${H}ms`;o.style[A]=`${k}px`,o.style.transitionTimingFunction=O,N&&N(o,j)}),me=$((o,j)=>{o.style[A]="auto",C&&C(o,j)}),he=$(o=>{o.style[A]=`${q()}px`,p&&p(o)}),pe=$(S),ge=$(o=>{const j=q(),{duration:k,easing:H}=te({style:W,timeout:R,easing:g},{mode:"exit"});if(R==="auto"){const O=Z.transitions.getAutoHeightDuration(j);o.style.transitionDuration=`${O}ms`,V.current=O}else o.style.transitionDuration=typeof k=="string"?k:`${k}ms`;o.style[A]=B,o.style.transitionTimingFunction=H,w&&w(o)}),ue=o=>{R==="auto"&&le.start(V.current||0,o),d&&d(G.current,o)};return e.jsx(oe,v({in:u,onEnter:ce,onEntered:me,onEntering:xe,onExit:he,onExited:pe,onExiting:ge,addEndListener:ue,nodeRef:G,timeout:R==="auto"?null:R},ae,{children:(o,j)=>e.jsx(Oe,v({as:b,className:ve(D.root,m,{entered:D.entered,exited:!u&&B==="0px"&&D.hidden}[o]),style:v({[P?"minWidth":"minHeight"]:B},W),ref:de},j,{ownerState:v({},U,{state:o}),children:e.jsx(Ke,{ownerState:v({},U,{state:o}),className:D.wrapper,ref:E,children:e.jsx(Qe,{ownerState:v({},U,{state:o}),className:D.wrapperInner,children:x})})}))}))});Y.muiSupportAuto=!0;const Ve=Q(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),qe=Q(e.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Je=Q(e.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),Xe=Q(e.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),Ye=({prediction:t})=>{const r=_(),n=K(t.home_team_name),l=K(t.away_team_name),d=se(t.home_team_name),x=se(t.away_team_name),m=`${l} @ ${n}`,b=(()=>{if(!t.confidence_tier)return null;switch(t.confidence_tier.toLowerCase()){case"high":return r.palette.success.main;case"medium":return r.palette.warning.main;case"low":return r.palette.error.main;default:return null}})();return e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2.5,pb:2,borderBottom:"1px solid",borderColor:"divider"},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:1.5},flex:1,minWidth:0},children:[e.jsx(re,{src:x,alt:l,sx:{width:{xs:32,sm:40},height:{xs:32,sm:40},aspectRatio:"1/1",border:"1px solid",borderColor:"divider",flexShrink:0},onError:g=>{const u=g.currentTarget;u.onerror=null,u.src="/logos/default.svg"}}),e.jsx(i,{variant:"body1",sx:{fontWeight:a.weight.semibold,fontSize:{xs:"0.875rem",sm:"0.9375rem"},color:"text.primary",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:m}),e.jsx(re,{src:d,alt:n,sx:{width:{xs:32,sm:40},height:{xs:32,sm:40},aspectRatio:"1/1",border:"1px solid",borderColor:"divider",flexShrink:0},onError:g=>{const u=g.currentTarget;u.onerror=null,u.src="/logos/default.svg"}})]}),t.confidence_tier&&b&&e.jsx(F,{label:t.confidence_tier.charAt(0).toUpperCase()+t.confidence_tier.slice(1).toLowerCase(),size:"small",sx:{height:{xs:22,sm:24},fontSize:{xs:"0.625rem",sm:"0.6875rem"},fontWeight:a.weight.semibold,letterSpacing:"0.5px",backgroundColor:c(b,.15),color:b,border:`1px solid ${c(b,.3)}`,borderRadius:h.sm,flexShrink:0,ml:1.5}})]})},y=(t,r,n)=>`clamp(${t}, ${r}, ${n})`,Ze=({prediction:t})=>{const r=_(),n=K(t.home_team_name),l=K(t.away_team_name),d=t.home_win_probability*100,x=t.away_win_probability*100,m=d>x?"home":"away",f=m==="home"?n:l,b=m==="home"?d:x;return e.jsxs(s,{sx:{mb:3},children:[e.jsxs(s,{sx:{mb:2.5,p:{xs:2,sm:2.5},borderRadius:h.md,backgroundColor:c(r.palette.primary.main,.04),border:`1px solid ${c(r.palette.primary.main,.1)}`,textAlign:"center"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1.5,fontSize:y("0.625rem","1.25vw","0.6875rem"),textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:a.weight.medium,opacity:.7},children:"Expected Winner"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:.75},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:a.weight.bold,fontSize:y("1.5rem","4vw","2rem"),color:"primary.main",lineHeight:1.2},children:f}),e.jsxs(i,{variant:"body1",sx:{fontWeight:a.weight.semibold,fontSize:y("0.9375rem","2.25vw","1.125rem"),color:"text.secondary",opacity:.9},children:[b.toFixed(1),"% win probability"]})]})]}),e.jsxs(s,{sx:{p:2.5,borderRadius:h.md,backgroundColor:c(r.palette.primary.main,.05),border:`1px solid ${c(r.palette.primary.main,.15)}`,textAlign:"center"},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2,fontSize:y("0.65rem","1.5vw","0.6875rem"),textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:a.weight.medium},children:"Score"}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:[e.jsxs(s,{sx:{textAlign:"center",flex:1},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:a.weight.bold,fontSize:y("1.75rem","4vw","2.25rem"),color:m==="away"?"primary.main":"text.primary",mb:.5},children:t.predicted_away_score.toFixed(0)}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:y("0.75rem","1.5vw","0.8125rem"),fontWeight:a.weight.medium},children:l})]}),e.jsx(i,{variant:"h6",color:"text.secondary",sx:{fontSize:y("1.25rem","2.5vw","1.5rem"),fontWeight:a.weight.regular},children:"-"}),e.jsxs(s,{sx:{textAlign:"center",flex:1},children:[e.jsx(i,{variant:"h4",sx:{fontWeight:a.weight.bold,fontSize:y("1.75rem","4vw","2.25rem"),color:m==="home"?"primary.main":"text.primary",mb:.5},children:t.predicted_home_score.toFixed(0)}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:y("0.75rem","1.5vw","0.8125rem"),fontWeight:a.weight.medium},children:n})]})]})]}),e.jsxs(s,{sx:{mt:2},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1.5,fontSize:y("0.65rem","1.5vw","0.6875rem"),textTransform:"uppercase",letterSpacing:"0.05em",fontWeight:a.weight.medium},children:"Win %"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:.75},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:y("0.75rem","1.5vw","0.8125rem")},children:l}),e.jsxs(i,{variant:"body2",sx:{fontWeight:a.weight.semibold,fontSize:y("0.8125rem","1.75vw","0.875rem")},children:[x.toFixed(1),"%"]})]}),e.jsx(s,{sx:{height:4,borderRadius:h.xs,backgroundColor:"action.hover",overflow:"hidden",position:"relative"},children:e.jsx(s,{sx:{height:"100%",width:`${x}%`,backgroundColor:c(r.palette.primary.main,.4),borderRadius:h.xs,transition:"width 0.3s ease-in-out"}})})]}),e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",mb:.75},children:[e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:y("0.75rem","1.5vw","0.8125rem")},children:n}),e.jsxs(i,{variant:"body2",sx:{fontWeight:a.weight.semibold,fontSize:y("0.8125rem","1.75vw","0.875rem")},children:[d.toFixed(1),"%"]})]}),e.jsx(s,{sx:{height:4,borderRadius:h.xs,backgroundColor:"action.hover",overflow:"hidden",position:"relative"},children:e.jsx(s,{sx:{height:"100%",width:`${d}%`,backgroundColor:r.palette.primary.main,borderRadius:h.xs,transition:"width 0.3s ease-in-out"}})})]})]})]})]})},et=({confidence:t,tier:r,explanation:n})=>{const l=_(),d=_e(l.breakpoints.down("sm")),x=r||(t>=.7?"high":t>=.5?"medium":"low"),m=()=>{switch(x){case"high":return l.palette.success.main;case"medium":return l.palette.warning.main;case"low":return l.palette.error.main;default:return l.palette.primary.main}},f=()=>{switch(x){case"high":return"High Model Confidence";case"medium":return"Medium Model Confidence";case"low":return"Low Model Confidence";default:return"Model Confidence"}},b=m(),g=f(),u=Math.round(t*100);return e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:{xs:1.5,sm:2}},children:[e.jsxs(s,{sx:{position:"relative",display:"inline-flex"},children:[e.jsx(ie,{variant:"determinate",value:u,size:d?48:56,thickness:4,sx:{color:b,"& .MuiCircularProgress-circle":{strokeLinecap:"round"}}}),e.jsx(s,{sx:{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs(i,{variant:"body2",component:"div",sx:{fontWeight:a.weight.bold,fontSize:{xs:"0.75rem",sm:"0.875rem"},color:"text.primary"},children:[u,"%"]})})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:.5},children:[e.jsx(We,{title:n||`Model confidence in this prediction: ${u}%`,arrow:!0,children:e.jsx(F,{label:g,size:"small",sx:{height:{xs:22,sm:24},fontSize:{xs:"0.6875rem",sm:"0.75rem"},fontWeight:a.weight.semibold,backgroundColor:c(b,.15),color:b,border:`1px solid ${c(b,.3)}`,borderRadius:h.xs,cursor:n?"help":"default"}})}),n&&e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.625rem",sm:"0.6875rem"},maxWidth:{xs:180,sm:200},lineHeight:1.3},children:n})]})]})},tt=({drivers:t})=>{const r=_();if(!t||t.length===0)return null;const n=d=>{switch(d.toLowerCase()){case"high":return r.palette.primary.main;case"moderate":return r.palette.warning.main;case"low":return r.palette.text.secondary;default:return r.palette.primary.main}},l=d=>{switch(d.toLowerCase()){case"high":return e.jsx(Ae,{sx:{fontSize:16}});case"low":return e.jsx(Pe,{sx:{fontSize:16}});default:return e.jsx(Je,{sx:{fontSize:16}})}};return e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:a.weight.semibold,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:"text.secondary",mb:.5},children:"Key Drivers"}),e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.map((d,x)=>{const m=n(d.magnitude),f=l(d.magnitude);return e.jsx(s,{sx:{p:1.5,borderRadius:h.sm,backgroundColor:c(r.palette.primary.main,.05),border:`1px solid ${c(r.palette.primary.main,.1)}`,transition:"all 0.2s","&:hover":{backgroundColor:c(r.palette.primary.main,.08),borderColor:c(r.palette.primary.main,.2)}},children:e.jsxs(s,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:1},children:[e.jsxs(s,{sx:{flex:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:a.weight.semibold,color:"text.primary",fontSize:"0.875rem",mb:.5},children:d.factor}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",lineHeight:1.4},children:d.impact})]}),e.jsx(F,{icon:f,label:d.magnitude,size:"small",sx:{height:22,fontSize:"0.6875rem",fontWeight:a.weight.medium,backgroundColor:c(m,.15),color:m,border:`1px solid ${c(m,.3)}`,borderRadius:h.xs,flexShrink:0}})]})},x)})})]})},rt=({risks:t,defaultExpanded:r=!1})=>{const n=_(),[l,d]=Se.useState(r);return!t||t.length===0?null:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsxs(s,{onClick:()=>d(!l),sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",p:1,borderRadius:h.sm,"&:hover":{backgroundColor:c(n.palette.warning.main,.05)}},children:[e.jsx(Xe,{sx:{fontSize:18,color:n.palette.warning.main}}),e.jsxs(i,{variant:"subtitle2",sx:{fontWeight:a.weight.semibold,fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:"0.05em",color:n.palette.warning.main,flex:1},children:["Risk Factors (",t.length,")"]}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.6875rem"},children:l?"Hide":"Show"})]}),e.jsx(Y,{in:l,children:e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:1},children:t.map((x,m)=>e.jsxs(s,{sx:{p:1.5,borderRadius:h.sm,backgroundColor:c(n.palette.warning.main,.08),border:`1px solid ${c(n.palette.warning.main,.2)}`},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:a.weight.semibold,color:n.palette.warning.main,fontSize:"0.875rem",mb:.5},children:x.factor}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",lineHeight:1.4},children:x.explanation})]},m))})})]})},st=({narrative:t})=>{const r=_();return t?e.jsx(s,{sx:{p:2,borderRadius:h.sm,backgroundColor:c(r.palette.primary.main,.03),border:`1px solid ${c(r.palette.primary.main,.08)}`},children:e.jsx(i,{variant:"body2",sx:{fontSize:"0.875rem",lineHeight:1.6,color:"text.primary",fontWeight:a.weight.regular},children:t})}):null},nt=({prediction:t})=>{const r=_(),[n,l]=z.useState(!1);return t.matchup_narrative||t.key_drivers&&t.key_drivers.length>0||t.risk_factors&&t.risk_factors.length>0||t.insights&&t.insights.length>0?e.jsxs(s,{sx:{borderTop:"1px solid",borderColor:"divider",pt:2,minHeight:n?"auto":48},children:[e.jsxs(s,{onClick:()=>l(!n),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:1,borderRadius:h.sm,transition:"background-color 0.2s ease-in-out","&:hover":{backgroundColor:c(r.palette.primary.main,.05)}},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ve,{sx:{fontSize:18,color:r.palette.primary.main}}),e.jsx(i,{variant:"subtitle2",sx:{fontWeight:a.weight.semibold,fontSize:{xs:"0.75rem",sm:"0.8125rem"},textTransform:"uppercase",letterSpacing:"0.05em",color:"text.secondary"},children:"Insights"})]}),e.jsx(Re,{size:"small",sx:{p:.5,minWidth:{xs:44,sm:32},minHeight:{xs:44,sm:32},color:"text.secondary",transition:"transform 0.2s ease-in-out",transform:n?"rotate(180deg)":"rotate(0deg)"},children:e.jsx(qe,{})})]}),e.jsx(Y,{in:n,timeout:"auto",children:e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2.5,mt:2},children:[t.confidence!==void 0&&e.jsx(s,{children:e.jsx(et,{confidence:t.confidence,tier:t.confidence_tier,explanation:t.confidence_explanation})}),t.matchup_narrative&&e.jsx(st,{narrative:t.matchup_narrative}),t.key_drivers&&t.key_drivers.length>0&&e.jsx(tt,{drivers:t.key_drivers}),t.risk_factors&&t.risk_factors.length>0&&e.jsx(rt,{risks:t.risk_factors,defaultExpanded:!1}),t.insights&&t.insights.length>0&&e.jsxs(s,{children:[e.jsx(i,{variant:"subtitle2",sx:{fontWeight:a.weight.semibold,fontSize:{xs:"0.75rem",sm:"0.8125rem"},textTransform:"uppercase",letterSpacing:"0.05em",color:"text.secondary",mb:1.5},children:"Additional Insights"}),e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:t.insights.slice(0,3).map((x,m)=>e.jsx(s,{sx:{p:1.5,borderRadius:h.sm,backgroundColor:c(r.palette.primary.main,.05),border:`1px solid ${c(r.palette.primary.main,.1)}`},children:e.jsxs(s,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[e.jsx(s,{sx:{width:4,height:4,borderRadius:"50%",backgroundColor:r.palette.primary.main,mt:.75,flexShrink:0}}),e.jsxs(s,{sx:{flex:1},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:a.weight.semibold,mb:.5,fontSize:{xs:"0.8125rem",sm:"0.875rem"},color:"text.primary"},children:x.title}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.8125rem"},lineHeight:1.5},children:x.description})]})]})},m))})]})]})})]}):null},it=({prediction:t})=>{const r=_();return e.jsxs(J,{elevation:0,sx:{display:"flex",flexDirection:"column",borderRadius:h.md,border:"1px solid",borderColor:"divider",backgroundColor:"background.paper",p:{xs:2.5,sm:3},minHeight:{xs:400,sm:450},transition:Ee.smooth,"&:hover":{boxShadow:r.palette.mode==="dark"?"0 8px 24px rgba(0, 0, 0, 0.4)":"0 4px 12px rgba(0, 0, 0, 0.12)",borderColor:c(r.palette.primary.main,.3)}},children:[e.jsx(Ye,{prediction:t}),e.jsx(Ze,{prediction:t}),e.jsx(s,{sx:{mt:"auto"},children:e.jsx(nt,{prediction:t})})]})},L=(t,r,n)=>`clamp(${t}, ${r}, ${n})`,gt=()=>{const[t,r]=ze(),[n,l]=z.useState(new Map),[d,x]=z.useState(!1),[m,f]=z.useState(null),g=t.get("date")||ne(new Date,"yyyy-MM-dd"),u=Le(),I=z.useCallback((p,S)=>{l(w=>{const T=new Map(w);return p&&p.length>0&&p.forEach(W=>{W.game_date===S&&T.set(W.game_id,W)}),T})},[]);z.useEffect(()=>{(async()=>{var S;x(!0),f(null);try{const w=await Me(`${Ie}/api/v1/predictions/date/${g}?season=${u}`,{},{maxRetries:2,retryDelay:500,timeout:12e4});console.log(`Predictions loaded: ${((S=w.predictions)==null?void 0:S.length)||0} games for ${g}`),w&&w.predictions&&I(w.predictions,g)}catch(w){console.error("Predictions error:",w),f(w instanceof Error?w.message:"Failed to load predictions")}finally{x(!1)}})()},[g,u,I]);const C=Array.from(n.values()).filter(p=>p.game_date===g),N=p=>{r({date:p})};return e.jsxs(s,{sx:{minHeight:"100dvh",backgroundColor:"background.default",display:"flex",flexDirection:"column",maxWidth:"100vw",overflowX:"hidden",overflowY:"visible",width:"100%"},children:[e.jsx($e,{}),e.jsx(s,{sx:{maxWidth:"1400px",mx:"auto",px:{xs:1,sm:2,md:3,lg:4},py:{xs:2,sm:3},width:"100%"},children:e.jsx(s,{sx:{display:"flex",justifyContent:"center",width:"100%"},children:e.jsxs(J,{elevation:0,sx:{width:"100%",maxWidth:{xs:"100%",sm:800,md:800},borderRadius:h.lg,backgroundColor:"background.paper",overflow:"hidden"},children:[e.jsxs(s,{sx:{p:{xs:2,sm:3},borderBottom:"1px solid",borderColor:"divider",backgroundColor:"background.paper",minHeight:{xs:140,sm:160}},children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,flexWrap:"wrap",gap:2},children:[e.jsx(s,{sx:{display:"flex",alignItems:"center",gap:1.5},children:e.jsxs(s,{children:[e.jsx(i,{variant:"h5",sx:{fontWeight:a.weight.bold,fontSize:{xs:"clamp(1.25rem, 4vw, 1.5rem)",sm:"clamp(1.25rem, 4vw, 1.5rem)"},color:"text.primary"},children:"Predictions"}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{fontSize:a.editorial.helper.xs},children:"AI-powered game insights"})]})}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1},children:[d&&C.length>0&&e.jsx(F,{icon:e.jsx(ie,{size:12}),label:"Updating",size:"small",sx:{fontSize:L("0.7rem","1.5vw","0.75rem"),height:24,backgroundColor:"background.paper"}}),e.jsx(F,{label:`${C.length} Game${C.length!==1?"s":""}`,size:"small",sx:{backgroundColor:"background.paper",fontWeight:a.weight.medium,fontSize:L("0.7rem","1.5vw","0.75rem")}})]})]}),e.jsx(s,{sx:{mt:2},children:e.jsx(He,{selectedDate:g,setSelectedDate:N})})]}),e.jsx(s,{sx:{p:{xs:2,sm:3},minHeight:{xs:600,sm:800}},children:d&&C.length===0?e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:2.5,md:3}},children:[...Array(3)].map((p,S)=>e.jsxs(J,{elevation:0,sx:{p:{xs:2.5,sm:3},border:"1px solid",borderColor:"divider",borderRadius:h.md,backgroundColor:"background.paper",minHeight:{xs:400,sm:450}},children:[e.jsx(M,{variant:"text",width:"60%",height:32,sx:{mb:2}}),e.jsx(M,{variant:"rectangular",width:"100%",height:120,sx:{mb:2,borderRadius:h.sm}}),e.jsxs(s,{sx:{display:"flex",gap:2,mb:2},children:[e.jsx(M,{variant:"text",width:"30%",height:24}),e.jsx(M,{variant:"text",width:"30%",height:24})]}),e.jsx(M,{variant:"text",width:"80%",height:20,sx:{mb:1}}),e.jsx(M,{variant:"text",width:"60%",height:20})]},S))}):m&&C.length===0?e.jsx(Fe,{severity:"error",sx:{mb:3,borderRadius:h.md,"& .MuiAlert-message":{fontSize:L("0.875rem","2vw","1rem")}},children:m}):C.length===0?e.jsxs(s,{sx:{textAlign:"center",py:6},children:[e.jsx(i,{variant:"h6",sx:{mb:1,fontWeight:a.weight.bold,fontSize:L("1rem","3vw","1.25rem")},children:"No Games Scheduled"}),e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:L("0.875rem","2vw","1rem")},children:["No games scheduled for ",ne(Ne(g),"MMMM d, yyyy")]})]}):e.jsx(s,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,sm:2.5,md:3}},children:[...C].sort((p,S)=>S.home_win_probability-p.home_win_probability).map(p=>e.jsx(s,{children:e.jsx(it,{prediction:p})},p.game_id))})})]})})})]})};export{gt as default};
