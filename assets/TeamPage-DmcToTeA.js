import{j as e,B as d,r as k,w as we,v as Se,p as me,S as q}from"./index-BeuNjhzr.js";import{r as ze,t,a as Ce,k as We,P as $,d as j,A as V,N as _e,m as D,n as I,v as G,w as N,S as O,j as L}from"./Navbar-MuDbTouq.js";import{T as x}from"./Button-D9sHacpw.js";import{g as Te,a as $e}from"./season-CT1Q602E.js";import{a6 as Pe,a7 as Re,a8 as Ae,a9 as he,aa as Ee,ad as De,ab as ge}from"./CartesianChart-BkSJFr0W.js";import{A as Ie,L as Me,a as Fe,g as Le}from"./teamColors-BvzSDVvK.js";import{p as pe,f as Y}from"./parseISO-D6CdGl5U.js";import{g as Be}from"./teamMappings-BQ8e-HGV.js";import{A as Ge}from"./Alert-su9Uuwqx.js";import{T as Ne,a as Z}from"./Tabs-DkhNbkvl.js";import{M as H}from"./MenuItem-B94b0CfJ.js";import{T as ee,a as te,b as re,c as M,d as o,e as se}from"./TableRow-DcBWEryx.js";import"./listItemIconClasses-D9Q1YNh2.js";const oe=({title:f,description:n,action:h})=>e.jsxs(d,{sx:{mb:ze.element,display:"flex",alignItems:{xs:"flex-start",sm:"center"},justifyContent:"space-between",flexWrap:"wrap",gap:{xs:1.5,sm:2}},children:[e.jsxs(d,{sx:{flex:1,minWidth:0},children:[e.jsx(x,{variant:"h5",sx:{fontWeight:t.weight.semibold,fontSize:t.editorial.sectionTitle.xs,color:"text.primary",letterSpacing:t.letterSpacing.normal,lineHeight:t.lineHeight.normal,mb:n?.5:0},children:f}),n&&e.jsx(x,{variant:"body2",sx:{fontSize:t.editorial.helper.xs,color:"text.secondary",fontWeight:t.weight.regular,letterSpacing:t.letterSpacing.normal,mt:.5},children:n})]}),h&&e.jsx(d,{sx:{flexShrink:0},children:h})]}),Oe=({data:f})=>{const n=Ce(),h=We(n.breakpoints.down("sm")),p=k.useMemo(()=>!f.games||f.games.length===0?[]:[...f.games].slice(0,20).reverse().map((c,v)=>{const S=pe(c.game_date),R=c.points+c.rebounds+c.assists+c.steals+c.blocks-c.turnovers;return{index:v,date:Y(S,"MMM d"),fullDate:c.game_date,Points:c.points,Efficiency:Math.max(0,R),Win:c.win_loss==="W"?1:0}}),[f.games]),i=k.useMemo(()=>{if(p.length===0)return{Points:0,Efficiency:0};const m=p.reduce((c,v)=>({Points:c.Points+v.Points,Efficiency:c.Efficiency+v.Efficiency}),{Points:0,Efficiency:0});return{Points:m.Points/p.length,Efficiency:m.Efficiency/p.length}},[p]),W=k.useMemo(()=>Math.max(...p.map(m=>m.Points),0),[p]),z=k.useMemo(()=>Math.max(...p.map(m=>m.Efficiency),0),[p]);if(p.length===0)return e.jsx($,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:e.jsx(x,{variant:"body2",color:"text.secondary",textAlign:"center",children:"No game data available"})});const g="#1976d2",u="#ed6c02";return e.jsxs($,{elevation:0,sx:{p:{xs:2,sm:3.5},backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:[e.jsx(x,{variant:"h6",sx:{fontWeight:t.weight.bold,mb:3,fontSize:t.size.h6,color:"text.primary"},children:"Recent Performance Trend"}),e.jsx(Pe,{width:"100%",height:h?320:420,children:e.jsxs(Ie,{data:p,margin:{top:20,right:h?30:50,left:h?20:30,bottom:h?60:40},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"pointsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:g,stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:g,stopOpacity:0})]}),e.jsxs("linearGradient",{id:"efficiencyGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:u,stopOpacity:.2}),e.jsx("stop",{offset:"95%",stopColor:u,stopOpacity:0})]})]}),e.jsx(Re,{strokeDasharray:"3 3",stroke:n.palette.divider,strokeOpacity:.3,vertical:!1}),e.jsx(Ae,{dataKey:"index",stroke:n.palette.text.secondary,style:{fill:n.palette.text.secondary,fontSize:h?"0.75rem":"0.8125rem",fontWeight:t.weight.medium},tickLine:{stroke:n.palette.text.secondary},axisLine:{stroke:n.palette.divider},angle:h?-45:0,textAnchor:h?"end":"middle",height:h?80:50,tickFormatter:m=>{const c=p[m];return(c==null?void 0:c.date)||""},interval:h?p.length>15?4:p.length>10?3:2:p.length>15?2:p.length>10?1:0}),e.jsx(he,{yAxisId:"left",stroke:n.palette.text.secondary,style:{fill:n.palette.text.secondary,fontSize:h?"0.75rem":"0.8125rem",fontWeight:t.weight.medium},domain:[0,Math.ceil(W*1.1)],tickLine:{stroke:n.palette.text.secondary},axisLine:{stroke:n.palette.divider},label:{value:"Points",angle:-90,position:"insideLeft",style:{fill:g,fontWeight:t.weight.semibold,fontSize:h?"0.75rem":"0.875rem"}}}),e.jsx(he,{yAxisId:"right",orientation:"right",stroke:n.palette.text.secondary,style:{fill:n.palette.text.secondary,fontSize:h?"0.75rem":"0.8125rem",fontWeight:t.weight.medium},domain:[0,Math.ceil(z*1.1)],tickLine:{stroke:n.palette.text.secondary},axisLine:{stroke:n.palette.divider},label:{value:"Efficiency",angle:90,position:"insideRight",style:{fill:u,fontWeight:t.weight.semibold,fontSize:h?"0.75rem":"0.875rem"}}}),e.jsx(Ee,{content:({active:m,payload:c,label:v})=>{if(m&&c&&c.length&&v!==void 0){const S=p[v];return e.jsxs($,{elevation:8,sx:{p:1.5,backgroundColor:n.palette.background.paper,border:`1px solid ${n.palette.divider}`,borderRadius:j.sm,boxShadow:n.palette.mode==="dark"?"0 8px 24px rgba(0, 0, 0, 0.5)":"0 4px 12px rgba(0, 0, 0, 0.15)"},children:[e.jsx(x,{variant:"body2",sx:{fontWeight:t.weight.bold,color:n.palette.text.primary,mb:1,fontSize:t.size.bodySmall},children:S!=null&&S.fullDate?Y(pe(S.fullDate),"MMM d, yyyy"):""}),c.map((R,_)=>{var K;const B=R.dataKey==="Points"?g:u;return e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",backgroundColor:B}}),e.jsxs(x,{variant:"body2",sx:{color:n.palette.text.secondary,fontSize:t.size.bodySmall,minWidth:80},children:[R.name,":"]}),e.jsx(x,{variant:"body2",sx:{fontWeight:t.weight.bold,color:B,fontSize:t.size.bodySmall},children:((K=R.value)==null?void 0:K.toFixed(1))||"N/A"})]},_)})]})}return null},cursor:{stroke:n.palette.divider,strokeWidth:1,strokeDasharray:"5 5"}}),e.jsx(Me,{wrapperStyle:{paddingTop:h?"16px":"24px"},iconType:"line",formatter:m=>e.jsx("span",{style:{color:n.palette.text.primary,fontSize:h?"0.75rem":"0.875rem"},children:m})}),e.jsx(De,{yAxisId:"left",type:"monotone",dataKey:"Points",stroke:g,fill:"url(#pointsGradient)",strokeWidth:2,dot:{r:h?3:4,fill:g,strokeWidth:1,stroke:n.palette.background.paper},activeDot:{r:h?5:6,fill:g,strokeWidth:1,stroke:n.palette.background.paper},name:`Points (Avg: ${i.Points.toFixed(1)})`,animationDuration:800,animationBegin:0}),e.jsx(Fe,{yAxisId:"right",type:"monotone",dataKey:"Efficiency",stroke:u,strokeWidth:2,dot:{r:h?3:4,fill:u,strokeWidth:1,stroke:n.palette.background.paper},activeDot:{r:h?5:6,fill:u,strokeWidth:1,stroke:n.palette.background.paper},name:`Efficiency (Avg: ${i.Efficiency.toFixed(1)})`,animationDuration:800,animationBegin:100}),e.jsx(ge,{yAxisId:"left",y:i.Points,stroke:g,strokeDasharray:"5 5",strokeOpacity:.4}),e.jsx(ge,{yAxisId:"right",y:i.Efficiency,stroke:u,strokeDasharray:"5 5",strokeOpacity:.4})]})})]})},He=({teamId:f,teamCity:n,teamName:h,abbreviation:p,record:i,conferenceRank:W,conference:z,teamStats:g})=>{const u=Le(f),m=c=>{const v=c%10,S=c%100;return v===1&&S!==11?"st":v===2&&S!==12?"nd":v===3&&S!==13?"rd":"th"};return e.jsx(d,{sx:{width:"100%",backgroundColor:u.primary,color:u.text,borderRadius:0,py:3,px:3,mb:3},children:e.jsxs(d,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},gap:3},children:[e.jsx(V,{src:`/logos/${p}.svg`,alt:`${n} ${h}`,sx:{width:{xs:64,sm:80},height:{xs:64,sm:80},backgroundColor:"transparent",border:`2px solid ${u.text}`,flexShrink:0},onError:c=>{const v=c.currentTarget;v.onerror=null,v.src="/logos/default.svg"}}),e.jsxs(d,{sx:{flex:1,minWidth:0},children:[e.jsxs(x,{variant:"h4",sx:{fontWeight:600,fontSize:{xs:"1.25rem",sm:"1.5rem",md:"1.75rem"},color:u.text,mb:.5},children:[n," ",h]}),(i||W)&&e.jsxs(x,{variant:"body2",sx:{fontSize:"0.875rem",color:u.text,opacity:.9,fontWeight:500,mb:g?2:0},children:[i,W&&z&&e.jsxs("span",{children:[" • ",W,m(W)," in ",z]})]}),g&&e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"repeat(2, 1fr)",sm:"repeat(4, 1fr)"},gap:2,mt:2},children:[g.ppg&&e.jsxs(d,{children:[e.jsx(x,{variant:"caption",sx:{display:"block",mb:.5,opacity:.8,fontSize:"0.75rem"},children:"PPG"}),e.jsxs(x,{variant:"body2",sx:{fontWeight:600,fontSize:"0.875rem"},children:[g.ppg.rank,m(g.ppg.rank)," • ",g.ppg.value.toFixed(1)]})]}),g.rpg&&e.jsxs(d,{children:[e.jsx(x,{variant:"caption",sx:{display:"block",mb:.5,opacity:.8,fontSize:"0.75rem"},children:"RPG"}),e.jsxs(x,{variant:"body2",sx:{fontWeight:600,fontSize:"0.875rem"},children:[g.rpg.rank,m(g.rpg.rank)," • ",g.rpg.value.toFixed(1)]})]}),g.apg&&e.jsxs(d,{children:[e.jsx(x,{variant:"caption",sx:{display:"block",mb:.5,opacity:.8,fontSize:"0.75rem"},children:"APG"}),e.jsxs(x,{variant:"body2",sx:{fontWeight:600,fontSize:"0.875rem"},children:[g.apg.rank,m(g.apg.rank)," • ",g.apg.value.toFixed(1)]})]}),g.oppg&&e.jsxs(d,{children:[e.jsx(x,{variant:"caption",sx:{display:"block",mb:.5,opacity:.8,fontSize:"0.75rem"},children:"OPPG"}),e.jsxs(x,{variant:"body2",sx:{fontWeight:600,fontSize:"0.875rem"},children:[g.oppg.rank,m(g.oppg.rank)," • ",g.oppg.value.toFixed(1)]})]})]})]})]})})},ot=()=>{const{team_id:f}=we(),[n,h]=Se(),p=me(),[i,W]=k.useState(null),[z,g]=k.useState(null),[u,m]=k.useState(null),[c,v]=k.useState([]),[S,R]=k.useState(null),[_,B]=k.useState(null),[K,ie]=k.useState(!0),[ne,ae]=k.useState(null),w=n.get("season")||Te(),U=n.get("tab")||"profile",J=$e(5),Q=r=>{h(a=>{const s=new URLSearchParams(a);return s.set("season",r),s})},fe=(r,a)=>{h({...Object.fromEntries(n),tab:a})},P=k.useMemo(()=>!i||!c.length?null:c.find(r=>r.team_id===i.team_id),[i,c]),C=k.useMemo(()=>{if(!_||!_.players.length)return null;const r=_.players.filter(a=>a.games_played>0);return r.length===0?null:{points:r.reduce((a,s)=>s.points>a.points?s:a,r[0]),rebounds:r.reduce((a,s)=>s.rebounds>a.rebounds?s:a,r[0]),assists:r.reduce((a,s)=>s.assists>a.assists?s:a,r[0]),steals:r.reduce((a,s)=>s.steals>a.steals?s:a,r[0]),blocks:r.reduce((a,s)=>s.blocks>a.blocks?s:a,r[0])}},[_]),ue=k.useMemo(()=>{if(!S||!i)return;const r=a=>{const s=S.categories.find(y=>y.category_name===a);if(!s)return;const l=[...s.teams].sort((y,A)=>A.value-y.value),b=l.findIndex(y=>y.team_id===i.team_id);if(b!==-1)return{rank:b+1,value:l[b].value}};return{ppg:r("Points Per Game"),rpg:r("Rebounds Per Game"),apg:r("Assists Per Game"),oppg:r("Opponent Points Per Game")}},[S,i]);k.useEffect(()=>{if(!f)return;(async()=>{ie(!0),ae(null);try{const a=await D(`${I}/api/v1/teams/${f}`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});W(a);try{const s=await D(`${I}/api/v1/standings/season/${w}`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});v(s.standings)}catch(s){console.error("Error fetching standings:",s)}try{const s=await D(`${I}/api/v1/teams/stats?season=${encodeURIComponent(w)}`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});R(s)}catch(s){console.error("Error fetching team stats:",s)}try{const s=await D(`${I}/api/v1/scoreboard/team/${f}/roster/${w}`,{},{maxRetries:2,retryDelay:1e3,timeout:3e4});g(s)}catch(s){console.error("Error fetching roster:",s)}try{const s=await D(`${I}/api/v1/teams/${f}/game-log?season=${encodeURIComponent(w)}`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});s&&s.games?(console.log(`Loaded ${s.games.length} games for team ${f}, season ${w}`),m(s)):(console.warn(`Game log returned empty or invalid data for team ${f}, season ${w}`),m(null))}catch(s){console.error("Error fetching game log:",s),m(null)}try{const s=await D(`${I}/api/v1/teams/${f}/player-stats?season=${encodeURIComponent(w)}`,{},{maxRetries:2,retryDelay:1e3,timeout:3e4});B(s)}catch(s){console.warn("Player stats not available for this season:",s),B(null)}}catch(a){ae(a instanceof Error?a.message:"Failed to load team information. Please try again.")}finally{ie(!1)}})()},[f,w]);const be=r=>Be(r)||"default",ye=()=>{var r,a;return e.jsxs(d,{children:[e.jsx(d,{sx:{mb:3,display:"flex",justifyContent:"flex-end"},children:e.jsxs(G,{size:"small",sx:{minWidth:{xs:160,sm:180}},children:[e.jsx(N,{children:"Season"}),e.jsx(O,{value:w,label:"Season",onChange:s=>Q(s.target.value),sx:{borderRadius:j.sm},children:J.map(s=>e.jsx(H,{value:s,children:s},s))})]})}),e.jsx($,{elevation:0,sx:{p:3,mb:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:2},children:[e.jsx(F,{label:"Founded",value:((r=i==null?void 0:i.year_founded)==null?void 0:r.toString())??"N/A"}),e.jsx(F,{label:"Arena",value:(i==null?void 0:i.arena)??"N/A"}),(i==null?void 0:i.arena_capacity)&&e.jsx(F,{label:"Capacity",value:i.arena_capacity.toLocaleString()}),e.jsx(F,{label:"Owner",value:(i==null?void 0:i.owner)??"N/A"}),e.jsx(F,{label:"GM",value:(i==null?void 0:i.general_manager)??"N/A"}),e.jsx(F,{label:"Coach",value:(i==null?void 0:i.head_coach)??"N/A"})]})}),(a=z==null?void 0:z.players)!=null&&a.length?e.jsxs($,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:[e.jsx(oe,{title:"Roster"}),e.jsx(d,{sx:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsx(ee,{sx:{overflowX:"auto",minWidth:{xs:600,sm:"auto"},"@media (hover: hover)":{"&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-track":{backgroundColor:"background.default"},"&::-webkit-scrollbar-thumb":{backgroundColor:"divider",borderRadius:j.xs,"&:hover":{backgroundColor:"text.secondary"}}}},children:e.jsxs(te,{size:"small",stickyHeader:!0,sx:{minWidth:{xs:600,sm:"auto"}},children:[e.jsx(re,{children:e.jsxs(M,{children:[e.jsx(o,{sx:{fontWeight:t.weight.bold},children:"Player"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"#"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Pos"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Height"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Weight"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Birthdate"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Age"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.bold},children:"Exp"}),e.jsx(o,{sx:{fontWeight:t.weight.bold},children:"School"})]})}),e.jsx(se,{children:z.players.map(s=>e.jsxs(M,{onClick:()=>p(`/player/${s.player_id}`),sx:{transition:L.normal,cursor:"pointer","&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(o,{children:e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(V,{src:`https://cdn.nba.com/headshots/nba/latest/1040x760/${s.player_id}.png`,alt:s.name,sx:{width:40,height:40,border:"1px solid",borderColor:"divider"},onError:l=>{const b=l.currentTarget;b.onerror=null,b.src=""}}),e.jsx(x,{sx:{fontWeight:t.weight.medium},children:s.name})]})}),e.jsx(o,{align:"center",children:s.jersey_number||"—"}),e.jsx(o,{align:"center",children:s.position||"—"}),e.jsx(o,{align:"center",children:s.height||"—"}),e.jsx(o,{align:"center",children:s.weight?`${s.weight} LBS`:"—"}),e.jsx(o,{align:"center",children:s.birth_date?Y(new Date(s.birth_date),"MMM d, yyyy"):"—"}),e.jsx(o,{align:"center",children:s.age?`${s.age} years`:"—"}),e.jsx(o,{align:"center",children:s.experience||"—"}),e.jsx(o,{children:s.school||"—"})]},s.player_id))})]})})})]}):null]})},je=()=>{if(!u||!u.games.length)return e.jsx(d,{sx:{textAlign:"center",py:8},children:e.jsx(x,{variant:"body1",color:"text.secondary",children:"No schedule data available for this season."})});const r=l=>{const b=c.find(y=>`${y.team_city} ${y.team_name}`===l||y.team_name===l);return b?b.team_id:null};let a=0,s=0;return e.jsxs(d,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,flexWrap:"wrap",gap:2},children:[e.jsxs(x,{variant:"h5",sx:{fontWeight:t.weight.bold,fontSize:{xs:t.size.h6,sm:t.size.h5}},children:[i==null?void 0:i.team_city," ",i==null?void 0:i.team_name," Schedule ",w]}),e.jsxs(d,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsxs(G,{size:"small",sx:{minWidth:180},children:[e.jsx(N,{children:"Season"}),e.jsx(O,{value:w,label:"Season",onChange:l=>Q(l.target.value),sx:{borderRadius:j.sm},children:J.map(l=>e.jsx(H,{value:l,children:l},l))})]}),c.length>0&&e.jsxs(G,{size:"small",sx:{minWidth:200},children:[e.jsx(N,{children:"More NBA Teams"}),e.jsx(O,{value:(i==null?void 0:i.team_id)||"",label:"More NBA Teams",onChange:l=>{const b=l.target.value;b&&b!==(i==null?void 0:i.team_id)&&(window.location.href=`/team/${b}?tab=schedule&season=${w}`)},sx:{borderRadius:j.sm},children:c.sort((l,b)=>{const y=`${l.team_city} ${l.team_name}`,A=`${b.team_city} ${b.team_name}`;return y.localeCompare(A)}).map(l=>e.jsxs(H,{value:l.team_id,children:[l.team_city," ",l.team_name]},l.team_id))})]})]})]}),u&&u.games.length>0&&e.jsx(d,{sx:{mb:4},children:e.jsx(Oe,{data:u})}),e.jsx($,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:e.jsx(ee,{sx:{overflowX:"auto","@media (hover: hover)":{"&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-track":{backgroundColor:"background.default"},"&::-webkit-scrollbar-thumb":{backgroundColor:"divider",borderRadius:j.xs,"&:hover":{backgroundColor:"text.secondary"}}}},children:e.jsxs(te,{size:"small",stickyHeader:!0,children:[e.jsx(re,{children:e.jsxs(M,{children:[e.jsx(o,{sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"Date"}),e.jsx(o,{sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"Opponent"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"Result"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"Record"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"PTS"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"REB"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"AST"})]})}),e.jsx(se,{children:[...u.games].reverse().map(l=>{var de,ce;const b=!l.matchup.includes("@"),y=b?((de=l.matchup.split(/vs\.?/)[1])==null?void 0:de.trim())||l.matchup:((ce=l.matchup.split("@")[1])==null?void 0:ce.trim())||l.matchup;let A="TBD";if(l.game_date&&l.game_date.trim()!=="")try{const E=new Date(l.game_date+"T00:00:00");isNaN(E.getTime())||(A=Y(E,"EEE, MMM d"))}catch{A=l.game_date||"TBD"}const T=l.win_loss||"—";T==="W"&&a++,T==="L"&&s++;const ke=T!=="—"?`${a}-${s}`:"—";let le=T;return T!=="—"&&l.points>0&&(le=`${T} ${l.points}`),e.jsxs(M,{sx:{transition:L.normal,"&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(o,{children:A}),e.jsx(o,{children:e.jsxs(d,{onClick:()=>{const E=r(y);E&&p(`/team/${E}?tab=schedule`)},sx:{display:"flex",alignItems:"center",gap:1,cursor:r(y)?"pointer":"default",transition:L.normal,"&:hover":{opacity:r(y)?.7:1}},children:[e.jsx(x,{component:"span",sx:{fontSize:t.size.caption,color:"text.secondary",mr:.5},children:b?"vs":"@"}),e.jsx(V,{src:`/logos/${be(y)}.svg`,alt:y,sx:{width:24,height:24,backgroundColor:"transparent"},onError:E=>{const xe=E.currentTarget;xe.onerror=null,xe.src="/logos/default.svg"}}),e.jsx(x,{variant:"body2",children:y})]})}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,color:T==="W"||T[0]==="W"?"success.main":T==="L"||T[0]==="L"?"error.main":"text.secondary"},children:le}),e.jsx(o,{align:"center",sx:{color:"text.secondary"},children:ke}),e.jsx(o,{align:"center",children:l.points||"—"}),e.jsx(o,{align:"center",children:l.rebounds||"—"}),e.jsx(o,{align:"center",children:l.assists||"—"})]},l.game_id)})})]})})})]})},ve=()=>e.jsxs(d,{children:[e.jsxs(d,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(G,{size:"small",sx:{minWidth:{xs:160,sm:180}},children:[e.jsx(N,{children:"Season"}),e.jsx(O,{value:w,label:"Season",onChange:r=>Q(r.target.value),sx:{borderRadius:j.sm},children:J.map(r=>e.jsx(H,{value:r,children:r},r))})]}),c.length>0&&e.jsxs(G,{size:"small",sx:{minWidth:{xs:160,sm:200}},children:[e.jsx(N,{children:"More NBA Teams"}),e.jsx(O,{value:(i==null?void 0:i.team_id)||"",label:"More NBA Teams",onChange:r=>{const a=r.target.value;a&&a!==(i==null?void 0:i.team_id)&&(window.location.href=`/team/${a}?tab=stats&season=${w}`)},sx:{borderRadius:j.sm},children:c.sort((r,a)=>{const s=`${r.team_city} ${r.team_name}`,l=`${a.team_city} ${a.team_name}`;return s.localeCompare(l)}).map(r=>e.jsxs(H,{value:r.team_id,children:[r.team_city," ",r.team_name]},r.team_id))})]})]}),C&&e.jsxs($,{elevation:0,sx:{p:3,mb:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:[e.jsx(oe,{title:"Team Leaders"}),e.jsxs(d,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(5, 1fr)"},gap:2},children:[e.jsx(X,{category:"Points",player:C.points,value:C.points.points,formatValue:r=>r.toFixed(1)}),e.jsx(X,{category:"Rebounds",player:C.rebounds,value:C.rebounds.rebounds,formatValue:r=>r.toFixed(1)}),e.jsx(X,{category:"Assists",player:C.assists,value:C.assists.assists,formatValue:r=>r.toFixed(1)}),e.jsx(X,{category:"Steals",player:C.steals,value:C.steals.steals,formatValue:r=>r.toFixed(1)}),e.jsx(X,{category:"Blocks",player:C.blocks,value:C.blocks.blocks,formatValue:r=>r.toFixed(1)})]})]}),_&&_.players.length>0&&e.jsxs($,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md},children:[e.jsx(oe,{title:"Player Stats"}),e.jsx(ee,{sx:{overflowX:"auto","@media (hover: hover)":{"&::-webkit-scrollbar":{height:8},"&::-webkit-scrollbar-track":{backgroundColor:"background.default"},"&::-webkit-scrollbar-thumb":{backgroundColor:"divider",borderRadius:j.xs,"&:hover":{backgroundColor:"text.secondary"}}}},children:e.jsxs(te,{size:"small",stickyHeader:!0,children:[e.jsx(re,{children:e.jsxs(M,{children:[e.jsx(o,{sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"Player"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"GP"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"GS"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"MIN"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"PTS"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"OR"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"DR"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"REB"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"AST"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"STL"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"BLK"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"TO"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"PF"}),e.jsx(o,{align:"center",sx:{fontWeight:t.weight.semibold,py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:"AST/TO"})]})}),e.jsx(se,{children:_.players.map(r=>e.jsxs(M,{sx:{transition:L.normal,"&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(o,{children:e.jsxs(d,{onClick:()=>p(`/player/${r.player_id}`),sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",transition:L.normal,"&:hover":{opacity:.7}},children:[e.jsx(V,{src:`https://cdn.nba.com/headshots/nba/latest/1040x760/${r.player_id}.png`,sx:{width:32,height:32,border:"1px solid",borderColor:"divider"},onError:a=>{const s=a.currentTarget;s.onerror=null,s.src="/fallback-player.png"}}),e.jsxs(d,{children:[e.jsx(x,{variant:"body2",sx:{fontWeight:t.weight.semibold,fontSize:t.size.body},children:r.player_name}),r.position&&e.jsx(x,{variant:"caption",sx:{color:"text.secondary",fontSize:t.size.caption},children:r.position})]})]})}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.games_played}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.games_started}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.minutes.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,fontWeight:t.weight.semibold,color:"text.primary",fontSize:t.editorial.helper.xs},children:r.points.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.offensive_rebounds.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.defensive_rebounds.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.rebounds.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.assists.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.steals.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.blocks.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.turnovers.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.personal_fouls.toFixed(1)}),e.jsx(o,{align:"center",sx:{py:2.5,color:"text.secondary",fontSize:t.editorial.helper.xs},children:r.assist_to_turnover!==null&&r.assist_to_turnover!==void 0?r.assist_to_turnover.toFixed(1):"—"})]},r.player_id))})]})})]}),!_&&e.jsxs($,{elevation:0,sx:{p:3,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:j.md,textAlign:"center"},children:[e.jsxs(x,{variant:"body1",color:"text.secondary",sx:{mb:1,fontSize:t.editorial.helper.xs},children:["Player statistics are not available for ",w,"."]}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{fontSize:t.editorial.helper.xs},children:"The season may not have started yet or data may not be available."})]})]});return e.jsxs(d,{sx:{minHeight:"100dvh",backgroundColor:"background.default",display:"flex",flexDirection:"column",maxWidth:"100vw",overflowX:"hidden",overflowY:"visible",width:"100%"},children:[e.jsx(_e,{}),e.jsx(d,{sx:{maxWidth:"1400px",mx:"auto",px:{xs:1,sm:2,md:3,lg:4},py:{xs:2,sm:3},width:"100%",overflowX:"hidden"},children:K?e.jsxs(d,{sx:{minHeight:400,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(q,{variant:"rectangular",height:200,sx:{borderRadius:2,mb:2}}),e.jsx(q,{variant:"rectangular",height:100,sx:{borderRadius:2}}),e.jsx(q,{variant:"rectangular",height:300,sx:{borderRadius:2}})]}):ne?e.jsx(Ge,{severity:"error",sx:{minHeight:100},children:ne}):i?e.jsxs(e.Fragment,{children:[i&&e.jsx(He,{teamId:i.team_id,teamCity:i.team_city,teamName:i.team_name,abbreviation:i.abbreviation,record:P?`${P.wins} - ${P.losses}`:void 0,conferenceRank:P==null?void 0:P.playoff_rank,conference:P==null?void 0:P.conference,teamStats:ue}),e.jsx($,{elevation:0,sx:{mb:3,border:"1px solid",borderColor:"divider",borderRadius:1.5,backgroundColor:"background.paper"},children:e.jsxs(Ne,{value:U,onChange:fe,sx:{borderBottom:"1px solid",borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:t.weight.semibold,fontSize:t.size.body}},children:[e.jsx(Z,{label:"Profile",value:"profile"}),e.jsx(Z,{label:"Schedule",value:"schedule"}),e.jsx(Z,{label:"Stats",value:"stats"})]})}),U==="profile"&&ye(),U==="schedule"&&je(),U==="stats"&&ve()]}):e.jsx(d,{sx:{minHeight:400,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(x,{variant:"body1",color:"text.secondary",textAlign:"center",children:"Team not found."})})})]})},F=({label:f,value:n})=>e.jsxs(d,{children:[e.jsx(x,{variant:"caption",color:"text.secondary",sx:{textTransform:"uppercase",display:"block",mb:.5},children:f}),e.jsx(x,{variant:"body2",sx:{fontWeight:t.weight.medium},children:n})]}),X=({category:f,player:n,value:h,formatValue:p})=>{const i=me();return e.jsxs(d,{onClick:()=>i(`/player/${n.player_id}`),sx:{p:2,border:"1px solid",borderColor:"divider",borderRadius:j.sm,backgroundColor:"background.default",transition:L.normal,cursor:"pointer","&:hover":{borderColor:"primary.main",backgroundColor:"action.hover"}},children:[e.jsx(x,{variant:"caption",sx:{color:"text.secondary",textTransform:"uppercase",fontSize:t.size.caption,mb:1,display:"block"},children:f}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",gap:1.5,mb:1},children:[e.jsx(V,{src:`https://cdn.nba.com/headshots/nba/latest/1040x760/${n.player_id}.png`,sx:{width:40,height:40,border:"1px solid",borderColor:"divider"},onError:W=>{const z=W.currentTarget;z.onerror=null,z.src="/logos/default.svg"}}),e.jsxs(d,{sx:{flex:1},children:[e.jsx(x,{variant:"body2",sx:{fontWeight:t.weight.bold,fontSize:t.size.body,mb:.25},children:n.player_name}),n.position&&e.jsx(x,{variant:"caption",sx:{color:"text.secondary",fontSize:t.size.caption},children:n.position})]})]}),e.jsx(x,{variant:"h6",sx:{fontWeight:t.weight.bold,color:"text.primary",fontSize:t.size.h6},children:p(h)})]})};export{ot as default};
