import{j as e,B as o,L as ce,v as he,p as me,r as l,S as w}from"./index-BeuNjhzr.js";import{c as Q,P as _,t as r,j as M,d as x,N as pe,r as b,m as B,n as F,T as ue,y as ge,z as fe,v as R,w as k,S as E,I as G,A as Y}from"./Navbar-MuDbTouq.js";import{G as U}from"./Grid-B2OP_tQa.js";import{T as i}from"./Button-D9sHacpw.js";import{P as be}from"./PageHeader-CWEsx8A0.js";import{g as je,a as ye}from"./season-CT1Q602E.js";import{T as Se,a as D}from"./Tabs-DkhNbkvl.js";import{M as h}from"./MenuItem-B94b0CfJ.js";import{A as V}from"./Alert-su9Uuwqx.js";import{T as ve,a as ze,b as Ce,c as J,d,e as Ae}from"./TableRow-DcBWEryx.js";import"./listItemIconClasses-D9Q1YNh2.js";const Pe=Q(e.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Te=Q(e.jsx("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),we=({data:m})=>{const j=n=>n.toLowerCase().includes("percentage")||n.toLowerCase().includes("pct"),y=n=>n.toLowerCase().includes("made")||n.toLowerCase().includes("total"),p=(n,g)=>j(g)?`${n.toFixed(1)}%`:y(g)?n.toString():n.toFixed(1);return e.jsx(U,{container:!0,spacing:{xs:2,sm:3},children:m.categories.map((n,g)=>e.jsx(U,{item:!0,xs:12,sm:6,md:4,children:e.jsxs(_,{elevation:0,sx:{p:{xs:2,sm:3},backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:1.5,height:"100%"},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:r.weight.bold,mb:{xs:2,sm:2.5},fontSize:{xs:r.size.bodySmall.xs,sm:r.size.h6},color:"text.primary"},children:n.category}),n.leaders.length===0?e.jsx(i,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:"No data available"}):e.jsx(o,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:n.leaders.map((v,u)=>e.jsx(Re,{leader:v,rank:u+1,formattedValue:p(v.value,n.category)},v.player_id))})]})},g))})},Re=({leader:m,rank:j,formattedValue:y})=>e.jsxs(o,{component:ce,to:`/player/${m.player_id}`,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",textDecoration:"none",color:"text.primary",p:{xs:1,sm:1.5},borderRadius:x.sm,transition:M.normal,"&:hover":{backgroundColor:"action.hover",color:"text.primary"}},children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,flex:1,minWidth:0},children:[e.jsxs(i,{variant:"body2",sx:{fontWeight:r.weight.bold,color:"text.secondary",minWidth:24,fontSize:{xs:r.size.bodySmall.xs,sm:r.size.bodySmall}},children:[j,"."]}),e.jsxs(i,{variant:"body2",sx:{fontWeight:r.weight.semibold,fontSize:{xs:r.size.bodySmall.xs,sm:r.size.bodySmall},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"text.primary",flex:1,minWidth:0},children:[m.player_name,m.team_abbreviation&&e.jsx(i,{component:"span",sx:{fontWeight:r.weight.semibold,fontSize:{xs:r.size.bodySmall.xs,sm:r.size.bodySmall},color:"primary.main",ml:.5},children:m.team_abbreviation})]})]}),e.jsx(i,{variant:"body2",sx:{fontWeight:r.weight.bold,color:"primary.main",fontSize:{xs:r.size.bodySmall.xs,sm:r.size.bodySmall},ml:1},children:y})]}),N=25,Be=()=>{const[m,j]=he(),y=me(),[p,n]=l.useState(m.get("tab")||"roster"),[g,v]=l.useState(null),[u,X]=l.useState([]),[q,H]=l.useState(!1),[K,O]=l.useState(!1),I=m.get("season")||je(),Z=ye(5),[z,ee]=l.useState(""),[C,se]=l.useState("All Players"),[A,re]=l.useState("All Teams"),[f,te]=l.useState("All Positions"),[S,W]=l.useState(1),oe=(s,t)=>{n(t),j(a=>{const c=new URLSearchParams(a);return c.set("tab",t),c})},ie=s=>{j(t=>{const a=new URLSearchParams(t);return a.set("season",s),a})};l.useEffect(()=>{p==="roster"&&(async()=>{O(!0);try{const t=await B(`${F}/api/v1/players/league-roster`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});console.log("Fetched roster data:",(t==null?void 0:t.length)||0,"players"),t&&X(t)}catch(t){console.error("Error fetching league roster:",t)}finally{O(!1)}})()},[p]),l.useEffect(()=>{p==="leaders"&&(async()=>{H(!0);try{const t=await B(`${F}/api/v1/players/season-leaders?season=${encodeURIComponent(I)}`,{},{maxRetries:3,retryDelay:1e3,timeout:3e4});v(t)}catch(t){console.error("Error fetching season leaders:",t)}finally{H(!1)}})()},[p,I]);const P=l.useMemo(()=>{let s=[...u];if(z.trim()){const t=z.toLowerCase();s=s.filter(a=>`${a.PLAYER_FIRST_NAME} ${a.PLAYER_LAST_NAME}`.toLowerCase().includes(t))}return C!=="All Players"&&(s=s.filter(t=>{var c;return(((c=t.PLAYER_LAST_NAME)==null?void 0:c.charAt(0).toUpperCase())||"")===C})),A!=="All Teams"&&(s=s.filter(t=>(t.TEAM_NAME||"")===A)),f!=="All Positions"&&(s=s.filter(t=>{const a=t.POSITION||"";return f==="Guard"?a.includes("G"):f==="Forward"?a.includes("F"):f==="Center"?a.includes("C"):!1})),s},[u,z,C,A,f]),ae=l.useMemo(()=>{const s=new Set;return u.forEach(t=>{t.TEAM_NAME&&s.add(t.TEAM_NAME)}),Array.from(s).sort()},[u]),ne=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],L=Math.ceil(P.length/N),$=l.useMemo(()=>{const s=(S-1)*N;return P.slice(s,s+N)},[P,S]);l.useEffect(()=>{W(1)},[z,C,A,f]);const le=s=>{const t=`${s.PLAYER_FIRST_NAME} ${s.PLAYER_LAST_NAME}`,a=s.PERSON_ID;return e.jsx(_,{elevation:0,onClick:()=>y(`/player/${a}`),sx:{p:b.card,mb:b.element,cursor:"pointer",transition:M.normal,backgroundColor:"background.paper",border:"1px solid",borderColor:"divider",borderRadius:x.md,minHeight:{xs:180,sm:200},display:"flex",flexDirection:"column","&:hover":{backgroundColor:"action.hover",borderColor:"primary.main"}},children:e.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:1.5},children:[e.jsx(Y,{src:`https://cdn.nba.com/headshots/nba/latest/1040x760/${a}.png`,alt:t,sx:{width:{xs:60,sm:80},height:{xs:80,sm:106.67},aspectRatio:"3/4",border:"1px solid",borderColor:"divider",flexShrink:0},onError:c=>{const T=c.currentTarget;T.onerror=null,T.src=""}}),e.jsxs(o,{sx:{flex:1,minWidth:0},children:[e.jsx(i,{variant:"h6",sx:{fontWeight:r.weight.bold,color:"text.primary",fontSize:{xs:r.size.bodySmall.xs,sm:r.editorial.metric.xs},mb:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t}),e.jsxs(i,{variant:"body2",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs,mb:1.5},children:[s.TEAM_ABBREVIATION||"No Team"," • #",s.JERSEY_NUMBER||"—"]}),e.jsxs(o,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:{xs:1,sm:1.5}},children:[e.jsxs(o,{children:[e.jsx(i,{variant:"caption",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs,textTransform:"lowercase"},children:"Position"}),e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,fontWeight:r.weight.medium,mt:.25},children:s.POSITION||"—"})]}),e.jsxs(o,{children:[e.jsx(i,{variant:"caption",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs,textTransform:"lowercase"},children:"Height"}),e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,fontWeight:r.weight.medium,mt:.25},children:s.HEIGHT||"—"})]}),e.jsxs(o,{children:[e.jsx(i,{variant:"caption",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs,textTransform:"lowercase"},children:"Weight"}),e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,fontWeight:r.weight.medium,mt:.25},children:s.WEIGHT?`${s.WEIGHT} lbs`:"—"})]}),e.jsxs(o,{children:[e.jsx(i,{variant:"caption",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs,textTransform:"lowercase"},children:"Country"}),e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,fontWeight:r.weight.medium,mt:.25},children:s.COUNTRY||"—"})]})]})]})]})},a)},de=()=>e.jsxs(o,{children:[e.jsxs(o,{sx:{mb:{xs:1,sm:1.5},minHeight:{xs:140,sm:160}},children:[e.jsx(ue,{fullWidth:!0,size:"small",placeholder:"Search players",value:z,onChange:s=>ee(s.target.value),InputProps:{startAdornment:e.jsx(ge,{position:"start",children:e.jsx(fe,{sx:{fontSize:{xs:18,sm:20}}})})},sx:{mb:b.element,borderRadius:x.sm,"& .MuiOutlinedInput-root":{fontSize:r.editorial.helper.xs}}}),e.jsxs(o,{sx:{display:"flex",gap:b.element,flexWrap:"wrap",mb:{xs:1,sm:1.5}},children:[e.jsxs(R,{size:"small",sx:{minWidth:{xs:140,sm:150}},children:[e.jsx(k,{sx:{fontSize:r.editorial.helper.xs},children:"All Players"}),e.jsxs(E,{value:C,label:"All Players",onChange:s=>se(s.target.value),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{maxHeight:{xs:"60vh",sm:"50vh"},mt:.5}},MenuListProps:{sx:{py:.5}}},sx:{borderRadius:x.sm,fontSize:r.editorial.helper.xs},children:[e.jsx(h,{value:"All Players",children:"All Players"}),ne.map(s=>e.jsx(h,{value:s,children:s},s))]})]}),e.jsxs(R,{size:"small",sx:{minWidth:{xs:160,sm:180}},children:[e.jsx(k,{sx:{fontSize:r.editorial.helper.xs},children:"All Teams"}),e.jsxs(E,{value:A,label:"All Teams",onChange:s=>re(s.target.value),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{maxHeight:{xs:"60vh",sm:"50vh"},mt:.5}},MenuListProps:{sx:{py:.5}}},sx:{borderRadius:x.sm,fontSize:r.editorial.helper.xs},children:[e.jsx(h,{value:"All Teams",children:"All Teams"}),ae.map(s=>e.jsx(h,{value:s,children:s},s))]})]}),e.jsxs(R,{size:"small",sx:{minWidth:{xs:140,sm:150}},children:[e.jsx(k,{sx:{fontSize:r.editorial.helper.xs},children:"All Positions"}),e.jsxs(E,{value:f,label:"All Positions",onChange:s=>te(s.target.value),MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{maxHeight:{xs:"60vh",sm:"50vh"},mt:.5}},MenuListProps:{sx:{py:.5}}},sx:{borderRadius:x.sm,fontSize:r.editorial.helper.xs},children:[e.jsx(h,{value:"All Positions",children:"All Positions"}),e.jsx(h,{value:"Guard",children:"Guard"}),e.jsx(h,{value:"Forward",children:"Forward"}),e.jsx(h,{value:"Center",children:"Center"})]})]})]})]}),e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,minHeight:{xs:40,sm:48},flexWrap:"wrap",gap:1},children:[e.jsxs(i,{variant:"body2",color:"text.secondary",sx:{fontSize:r.editorial.helper.xs},children:[P.length," players • Page ",S," of ",L||1]}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(G,{size:"small",onClick:()=>W(s=>Math.max(1,s-1)),disabled:S===1,sx:{minWidth:{xs:44,sm:32},minHeight:{xs:44,sm:32}},children:e.jsx(Pe,{})}),e.jsx(R,{size:"small",sx:{minWidth:{xs:70,sm:80}},children:e.jsx(E,{value:S,onChange:s=>W(Number(s.target.value)),sx:{borderRadius:x.sm,fontSize:{xs:r.size.body.xs,sm:r.size.body.sm}},children:Array.from({length:L||1},(s,t)=>t+1).map(s=>e.jsx(h,{value:s,children:s},s))})}),e.jsx(G,{size:"small",onClick:()=>W(s=>Math.min(L||1,s+1)),disabled:S>=(L||1),sx:{minWidth:{xs:44,sm:32},minHeight:{xs:44,sm:32}},children:e.jsx(Te,{})})]})]}),e.jsx(o,{sx:{minHeight:{xs:600,sm:800}},children:K&&u.length===0?e.jsxs(e.Fragment,{children:[e.jsx(o,{sx:{display:{xs:"block",sm:"none"}},children:[...Array(10)].map((s,t)=>e.jsx(w,{variant:"rectangular",height:200,sx:{borderRadius:x.md,mb:1.5}},t))}),e.jsxs(o,{sx:{display:{xs:"none",sm:"block"}},children:[e.jsx(w,{variant:"rectangular",height:60,sx:{borderRadius:x.md,mb:1}}),[...Array(10)].map((s,t)=>e.jsx(w,{variant:"rectangular",height:56,sx:{borderRadius:x.sm,mb:.5}},t))]})]}):u.length===0?e.jsx(V,{severity:"info",sx:{borderRadius:x.md},children:"No roster data available."}):P.length===0?e.jsx(V,{severity:"info",sx:{borderRadius:x.md},children:"No players found matching your filters."}):e.jsxs(e.Fragment,{children:[e.jsx(o,{sx:{display:{xs:"block",sm:"none"}},children:$.map(s=>le(s))}),e.jsx(o,{sx:{display:{xs:"none",sm:"block"},overflowX:"auto",WebkitOverflowScrolling:"touch"},children:e.jsx(ve,{component:_,elevation:0,sx:{border:"1px solid",borderColor:"divider",borderRadius:x.md,backgroundColor:"background.paper",minHeight:{xs:400,sm:500}},children:e.jsxs(ze,{children:[e.jsx(Ce,{children:e.jsxs(J,{sx:{backgroundColor:"background.paper"},children:[e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Player"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Team"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"#"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Position"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Height"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Weight"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"School"}),e.jsx(d,{sx:{fontWeight:r.weight.semibold,backgroundColor:"background.paper",fontSize:r.editorial.helper.xs,py:2.5,color:"text.secondary"},children:"Country"})]})}),e.jsx(Ae,{children:$.map(s=>{const t=`${s.PLAYER_FIRST_NAME} ${s.PLAYER_LAST_NAME}`,a=s.PERSON_ID;return e.jsxs(J,{onClick:()=>y(`/player/${a}`),sx:{cursor:"pointer",backgroundColor:"background.paper","&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(d,{sx:{py:2.5},children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[e.jsx(Y,{src:`https://cdn.nba.com/headshots/nba/latest/1040x760/${a}.png`,alt:t,sx:{width:40,height:40,aspectRatio:"1/1",border:"1px solid",borderColor:"divider"},onError:c=>{const T=c.currentTarget;T.onerror=null,T.src=""}}),e.jsx(o,{children:e.jsx(i,{variant:"body2",sx:{fontWeight:r.weight.bold,color:"text.primary",fontSize:r.editorial.helper.xs},children:t})})]})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{color:"text.secondary",fontSize:r.editorial.helper.xs},children:s.TEAM_ABBREVIATION||"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.JERSEY_NUMBER||"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.POSITION||"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.HEIGHT||"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.WEIGHT?`${s.WEIGHT} lbs`:"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.COLLEGE||"—"})}),e.jsx(d,{sx:{py:2.5},children:e.jsx(i,{variant:"body2",sx:{fontSize:r.editorial.helper.xs,color:"text.secondary"},children:s.COUNTRY||"—"})})]},a)})})]})})})]})})]}),xe=()=>e.jsxs(o,{sx:{minHeight:{xs:400,sm:500}},children:[e.jsx(o,{sx:{mb:3,display:"flex",justifyContent:"flex-end",minHeight:{xs:40,sm:48}},children:e.jsxs(R,{size:"small",sx:{minWidth:{xs:160,sm:180}},children:[e.jsx(k,{sx:{fontSize:r.editorial.helper.xs},children:"Season"}),e.jsx(E,{value:I,label:"Season",onChange:s=>ie(s.target.value),sx:{borderRadius:x.sm,fontSize:r.editorial.helper.xs},children:Z.map(s=>e.jsx(h,{value:s,children:s},s))})]})}),q||!g?e.jsxs(o,{sx:{minHeight:{xs:400,sm:500}},children:[e.jsx(w,{variant:"rectangular",height:60,sx:{borderRadius:x.md,mb:2}}),[...Array(5)].map((s,t)=>e.jsx(w,{variant:"rectangular",height:120,sx:{borderRadius:x.md,mb:2}},t))]}):e.jsx(we,{data:g})]});return e.jsxs(o,{sx:{minHeight:"100dvh",backgroundColor:"background.default",display:"flex",flexDirection:"column",maxWidth:"100vw",overflowX:"hidden",overflowY:"visible",width:"100%"},children:[e.jsx(pe,{}),e.jsxs(o,{sx:{maxWidth:"1400px",mx:"auto",px:b.container,py:b.containerVertical,width:"100%"},children:[e.jsx(be,{title:"Players"}),e.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:b.section,minHeight:{xs:48,sm:56}},children:e.jsxs(Se,{value:p,onChange:oe,sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:r.weight.semibold,fontSize:r.editorial.sectionTitle.xs,minHeight:{xs:48,sm:56},transition:M.normal}},children:[e.jsx(D,{label:"Roster",value:"roster"}),e.jsx(D,{label:"Leaders",value:"leaders"})]})}),p==="roster"&&de(),p==="leaders"&&xe()]})]})};export{Be as default};
